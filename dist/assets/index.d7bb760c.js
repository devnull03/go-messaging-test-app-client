import{d as p,o as l,c,a as i,w as d,v as m,b as f,t as u,F as g,r as h,e as y,f as v,g as _}from"./vendor.b39af3b4.js";const N=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}};N();var S=(e,s)=>{const r=e.__vccOpts||e;for(const[a,t]of s)r[a]=t;return r};const b=p({name:"Main",data(){return{serverAddr:"wss://go-messaging-test-app-server.arnav03mehta.repl.co/socket",text:"",messages:[],userName:"",typing:!1,connection:null}},methods:{onEnter(){!this.text||!this.connection||(this.connection.send(JSON.stringify({username:this.userName,content:this.text})),this.text="",this.typing=!1)},onPress(){},getUserName(){const e=localStorage.getItem("username");if(e){this.userName=e;return}this.userName=`anon${Math.floor(Math.random()*9999)+1e3}`,localStorage.setItem("username",this.userName)}},created(){this.getUserName(),console.log("Starting connection to WebSocket Server"),this.connection=new WebSocket(this.serverAddr),this.connection.onopen=e=>{console.log(e),console.log("Successfully connected to the echo websocket server...")},this.connection.onmessage=e=>{console.log(e),this.messages.push(JSON.parse(JSON.parse(e.data).body))}}}),k={class:"input-wrapper"},w={class:"message-list"},M={class:"message"};function O(e,s,r,a,t,n){return l(),c("main",null,[i("div",k,[d(i("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>e.text=o),onInput:s[1]||(s[1]=(...o)=>e.onPress&&e.onPress(...o)),id:"message-box",onKeypress:s[2]||(s[2]=f((...o)=>e.onEnter&&e.onEnter(...o),["enter"])),placeholder:"Message"},null,544),[[m,e.text]]),i("p",null,u(e.typing?`${e.userName} is typing . . .`:"\xA0"),1)]),i("div",w,[(l(!0),c(g,null,h(e.messages,o=>(l(),c("div",M,[i("p",null,u(o.username),1),y(" "+u(o.content),1)]))),256))])])}var x=S(b,[["render",O]]);const $=p({setup(e){return(s,r)=>(l(),v(x))}});_($).mount("#app");
